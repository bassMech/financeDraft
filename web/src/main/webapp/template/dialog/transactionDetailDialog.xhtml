<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui">
	<p:dialog id="transactionDetailDialog" header="#{tags['transaction']}" width="auto" responsive="true"
		widgetVar="transactionDetailDialog" showEffect="fade" resizable="true">
		<p:panel>
			<div class="grid">
				<div class="col-6">
					<p:fieldset legend="#{tags['data']}">
						<div class="grid">
							<div class="col-6">
								<div>
									<p:tag value="#{tags['title']}"></p:tag>
								</div>
								<div>
									<p:inputText id="transactionDetailDialog_title" value="#{accountView.transactionDialog.title}">
										<p:ajax></p:ajax>
									</p:inputText>
								</div>
							</div>

							<div class="col-6">
								<div>
									<p:tag value="#{tags['value']}"></p:tag>
								</div>
								<div>
									<p:inputNumber id="transactionDetailDialog_value" value="#{accountView.transactionDialog.value}" decimalPlaces="2"
										symbol="#{accountView.settingService.dbCurrency.symbol}" symbolPosition="s" emptyValue="zero">
										<p:ajax></p:ajax>
									</p:inputNumber>
								</div>
							</div>
						</div>
						<div class="col-12">
							<div>
								<p:tag value="#{tags['description']}"></p:tag>
							</div>
							<div>
								<p:inputText id="transactionDetailDialog_description" value="#{accountView.transactionDialog.description}"
									style="width: 100% !important">
									<p:ajax></p:ajax>
								</p:inputText>
							</div>
						</div>
					</p:fieldset>
					<p:fieldset legend="#{tags['date']}">
						<div class="flex gap-2">
							<div>
								<div>
									<p:tag value="#{tags['expected']}"></p:tag>
								</div>
								<div>
									<p:selectOneMenu id="transactionDetailDialog_expectedDaySelect" value="#{accountView.transactionDialog.expectedDay}"
										style="padding-left:5px;">
										<p:ajax />
										<f:selectItems value="#{accountView.transactionDialog.selectableExpectedDay.entrySet()}" var="day" itemLabel="#{day.value}" 
										itemValue="#{day.key}" />
									</p:selectOneMenu>
								</div>
							</div>
							<div>
								<div>
									<p:tag value="#{tags['executed']}"></p:tag>
								</div>
								<div>
									<p:datePicker id="transactionDetailDialog_exectuedAt" widgetVar="exectuedAt" value="#{accountView.transactionDialog.executedAt}"
										monthNavigator="true" yearNavigator="true" yearRange="#{accountView.getYearRangeForDatePicker()}"
										locale="#{accountView.getCurrentLocale().getLanguage()}" />
								</div>
							</div>
						</div>
					</p:fieldset>
				</div>
				<div class="col-6">
					<p:panel id="tagTransactionPickList" class="margin-top-1em">
						<div class="grid">
							<p:card class="col-6">
								<p:dataTable var="tag" value="#{accountView.transactionDialog.tagsAvailable}" rowKey="#{tag.id}" class="no-header-table">
									<f:facet name="header">
										<div class="flex justify-content-between align-items-center">
											<h:outputText value="#{tags['available']}" />
											<p:commandButton icon="pi pi-angle-double-right" action="#{accountView.transactionDialog.onAllTagAssign}" process="@this"
												update="mainForm:tagTransactionPickList"></p:commandButton>
										</div>
									</f:facet>
									<p:column sortBy="#{tag.title}" sortOrder="asc">
										<p:tooltip for="@next" value="#{tag.description}" position="top" />
										<p:chip label="#{tag.title}" style="background-color:#{tag.backgroundHexColor}!important; color:#{tag.textHexColor}!important;" />
									</p:column>
									<p:column class="flex justify-content-end">
										<p:commandButton icon="pi pi-chevron-right" action="#{accountView.transactionDialog.onTagAssign(tag.id)}" process="@this"
											update="mainForm:tagTransactionPickList"></p:commandButton>
									</p:column>
								</p:dataTable>
							</p:card>

							<p:card class="col-6">
								<p:dataTable id="accountTagsAssigned" var="tag" value="#{accountView.transactionDialog.tagsAssigned}" rowKey="#{tag.id}" class="no-header-table">
									<f:facet name="header">
										<div class="flex justify-content-between align-items-center">
											<p:commandButton icon="pi pi-angle-double-left" action="#{accountView.transactionDialog.onAllTagRemove}" process="@this"
												update="mainForm:tagTransactionPickList"></p:commandButton>
											<h:outputText value="#{tags['assigned']}" class="flex align-content-center" />
										</div>
									</f:facet>
									<p:column class="flex justify-content-start">
										<p:commandButton icon="pi pi-chevron-left" action="#{accountView.transactionDialog.onTagRemove(tag.id)}" process="@this"
											update="mainForm:tagTransactionPickList"></p:commandButton>
									</p:column>
									<p:column sortBy="#{tag.title}" sortOrder="asc">
										<p:tooltip for="@next" value="#{tag.description}" position="top" />
										<p:chip label="#{tag.title}" style="background-color:#{tag.backgroundHexColor}!important; color:#{tag.textHexColor}!important;" />
									</p:column>
								</p:dataTable>
							</p:card>

						</div>
					</p:panel>
				</div>
			</div>

		</p:panel>
		<f:facet name="footer">
			<div class="grid">
				<div class="col-6 flex justify-content-start">
					<p:commandButton icon="pi pi-times" value="#{tags['delete']}" actionListener="#{accountView.onDeleteTransaction}" process="@this"
						styleClass="ui-button-danger" rendered="#{accountView.transactionDialog.isDeleteButtonRendered()}">
						<p:confirm header="#{messages['please.confirm']}" message="#{messages['account.delete.confirm']}" icon="pi pi-info-circle" />
					</p:commandButton>
					<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
						<p:commandButton value="#{tags['cancel']}" type="button" styleClass="ui-confirmdialog-no ui-button-flat" />
						<p:commandButton value="#{tags['confirm']}" type="button" styleClass="ui-confirmdialog-yes" />
					</p:confirmDialog>
				</div>
				<div class="col-6 flex justify-content-end">
					<p:commandButton icon="pi pi-undo" value="#{tags['dismiss']}" onclick="PF('transactionDetailDialog').hide()" process="@this"></p:commandButton>
					<p:commandButton icon="pi pi-save" value="#{tags['save']}" actionListener="#{accountView.closeDialogAndSaveTransaction}"
						process="@this" styleClass="ui-button-success"></p:commandButton>
				</div>
			</div>
		</f:facet>
	</p:dialog>
</ui:composition>